# GZ11-Diplom_QAEngeneer
Работа с базой данных

Задание 1
ТК-1  проверить, отображается ли созданный заказ в базе данных.
Окружение: Яндекс Самокат версия 2.0
Предусловия:
1.	Созданы курьеры с Логинами: Zinur, Tanya И Artem
2.	Создано 9 заказов
3.	Курьер Zinur принял в работу 3 заказа, два из них завершил
4.	Курьер Tanya приняла в работу 2 заказа, ни один не завершила
5.	Курьер Artem принял в работу 2 заказа, один из них завершил
Шаги: 
1.	Подключиться к БД и вывести список логинов курьеров с количеством их заказов в статусе «В доставке» (поле inDelivery = true):
a.	$ ssh-keygen
b.	$ cat ~/.ssh/id_rsa.pub
c.	$ ssh <имя пользователя>@<хост> -p <порт>
d.	psql -U morty -d scooter_rent 
e.	password: smith
f.	SELECT c.login AS "courierLogin",
       COUNT(o.id) AS "countDelivery"
FROM "Couriers" AS c
LEFT JOIN "Orders" AS o ON c.id = o."courierId"
WHERE o."inDelivery" = TRUE
GROUP BY c.login;
2.	Нажать ВВОД
Ожидаемый результат:
courierLogin | countDelivery
--------------+---------------
Artem        |             1
Tanya        |             2
Zinur        |             1
(3 rows)

Задание 2

ТК-2 проверка корректности статуса заказа в БД
Окружение: Яндекс Самокат версия 2.0
Предусловия:
6.	Созданы курьеры с Логинами: Zinur, Tanya И Artem
7.	Создано 9 заказов (записать номера заказов)
8.  Отменить один из заказов
9.	Курьер Zinur принял в работу 3 заказа, два из них завершил (записать номера принятых и завершенных заказов)
10.	Курьер Tanya приняла в работу 2 заказа, ни один не завершила (записать номера принятых и завершенных заказов)
11.	Курьер Artem принял в работу 2 заказа, один из них завершил (записать номера принятых и завершенных заказов)
Шаги: 
1.	Подключиться к БД и вывести список логинов курьеров с количеством их заказов в статусе «В доставке» (поле inDelivery = true):
a.	$ ssh-keygen
b.	$ cat ~/.ssh/id_rsa.pub
c.	$ ssh <имя пользователя>@<хост> -p <порт>
d.	psql -U morty -d scooter_rent 
e.	password: smith
f.	SELECT track AS "trackNumber",
CASE
WHEN finished = TRUE THEN 2
WHEN cancelled = TRUE THEN -1
WHEN "inDelivery" = TRUE THEN 1
ELSE 0
END AS "statusOrders"
FROM "Orders";
4.	Нажать ВВОД
Ожидаемый результат:
 trackNumber | statusOrders
-------------+--------------
      579566 |           -1
      211772 |            0
      324057 |            1
      782499 |            1
      262299 |            1
       92270 |            1
      467703 |            2
      871156 |            2
      209693 |            2
(9 rows)
где trackNumber - уникальный номер заказа
statusOrders: 2 - заказ завершен, 1 - заказ в доставке, -1 - заказ отмене, 0 - заказ не принят курьером

Автоматизация теста к API
Шаги автотеста:
- Выполнить запрос на создание заказа.
- Сохранить номер трека заказа.
- Выполнить запрос на получения заказа по треку заказа.
- Проверить, что код ответа равен 200.
- Для запуска тестов должны быть установлены пакеты pytest и requests
- Запуск всех тестов выполянется командой pytest
